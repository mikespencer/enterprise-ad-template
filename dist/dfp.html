<!-- AD ID: %eaid! -->
<!-- 1170x460 |  - Enterprise Ad Template -->
<!-- DEPENDENCIES: jQuery >= 1.7.1 -->

<script>
  (function($){

    'use strict';

    if(window.top !== window.self && window.frameElement && window.frameElement.parentNode){
      window.frameElement.style.display = 'none';
    }

    if(!$){
      return false;
    }

    //Ad config
    var config = {
      adid: parseInt('%eaid!', 10) || false,
      clickTracker: '%%CLICK_URL_UNESC%%',
      clickTrackerEsc: '%%CLICK_URL_ESC%%',
      clickTag: '%%DEST_URL%%',
      creative: [
        {
          breakpoints: [false, [%SmallCreativeMinWidth%] - 1],
          url: '[%MobileCreative%]' || '[%MobileCreativeURL%]',
          width: 300,
          height: 250
        },
        {
          breakpoints: [[%SmallCreativeMinWidth%], [%MediumCreativeMinWidth%] - 1],
          url: '[%SmallCreative%]' || '[%SmallCreativeURL%]',
          height: [%SmallCreativeHeightOverride%] || [%Height%],
          fixed: true,
          banner: true
        },
        {
          breakpoints: [[%MediumCreativeMinWidth%], [%LargeCreativeMinWidth%] - 1],
          url: '[%MediumCreative%]' || '[%MediumCreativeURL%]',
          height: [%MediumCreativeHeightOverride%] || [%Height%],
          fixed: true,
          banner: true
        },
        {
          breakpoints: [[%LargeCreativeMinWidth%], false],
          url: '[%LargeCreative%]' || '[%LargeCreativeURL%]',
          height: [%LargeCreativeHeightOverride%] || [%Height%],
          width: 1170,
          fixed: true,
          banner: true
        }
      ],
      target: '[%Target%]',
      backgroundColor: '[%BackgroundColor%]',
      bannerHTML: '[%BannerHTML%]',
      thirdPartyTrackingPixels: ['[%ThirdPartyTrackingPixel%]'],
      thirdPartyTrackingScripts: ['[%ThirdPartyTrackingScripts%]']
    };

    [%JSOverrides%]

    $.ajax({
      url: 'http://js.washingtonpost.com/wp-srv/ad/public/enterprise-ad-template/dist/js/main.min.js',
      timeout: 2000,
      dataType: 'script',
      crossDomain: true,
      cache: true,
      success: function(){
        window.top.wpAd.enterprise = new window.top.wpAd.Enterprise(config);
      },
      error: function(){
        try{
          window.console.log('http://js.washingtonpost.com/wp-srv/ad/public/enterprise-ad-template/dist/js/main.min.js AJAX error:', arguments);
        } catch(e){}
      }
    });

  })(window.top.jQuery);
</script>